def flip(arr, k):
    return arr[:k + 1][::-1] + arr[k + 1:]

def find_max_index(arr, n):
    max_index = 0
    for i in range(1, n):
        if arr[i] > arr[max_index]:
            max_index = i
    return max_index

def pancake_sort(arr):
    n = len(arr)
    for curr_size in range(n, 1, -1):
        max_index = find_max_index(arr, curr_size)
        if max_index != curr_size - 1:
            if max_index != 0:
                arr = flip(arr, max_index)
                print(f"Pancake sort after flipping at index {max_index}: {arr}")  # Show intermediate state
            arr = flip(arr, curr_size - 1)
            print(f"Pancake sort after flipping to move max to end: {arr}")  # Show intermediate state

# User input
arr_pancake = list(map(int, input("Enter 8 integers for Pancake Sort (space-separated): ").split()))
pancake_sort(arr_pancake)
print("Sorted array:", arr_pancake)
