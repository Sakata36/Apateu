def flip(arr, k):
    """Reverse the order of the first k elements in the array."""
    start = 0
    while start < k:
        arr[start], arr[k] = arr[k], arr[start]
        start += 1
        k -= 1

def find_max_index(arr, n):
    """Find the index of the maximum element in arr[0..n-1]."""
    max_index = 0
    for i in range(1, n):
        if arr[i] > arr[max_index]:
            max_index = i
    return max_index

def pancake_sort(arr):
    """Perform pancake sort on the array."""
    n = len(arr)
    for size in range(n, 1, -1):
        # Find the index of the maximum element in arr[0..size]
        max_index = find_max_index(arr, size)
        
        # If the maximum element is not already at the end, we need to move it
        if max_index != size - 1:
            # Flip the maximum element to the front if it's not already there
            if max_index != 0:
                flip(arr, max_index)
                print(f"Flip at index {max_index}: {arr}")

            # Flip it to its final position
            flip(arr, size - 1)
            print(f"Flip at index {size - 1}: {arr}")

# Predefined input
arr = [34, 8, 64, 51, 32, 21, 5, 13]  # 8 elements already inputted

print("\nOriginal array:", arr)
pancake_sort(arr)
print("\nSorted array:", arr)
